<div class="main-content">
  <div class="row">
    <div class="col-md-12">
      <div class="card-body">

        <!--#region button add-->
        <button class="btn btn-info btn-round" (click)="callGetrow()" type="button" data-target="#lookupModalGenerate"
          data-role="R00015590001560C" data-toggle="modal" href="#">
          Add </button>
        <button class="btn btn-info btn-round" (click)="btnSaveList()" data-role="R00015590001560C">
          Save
        </button>
        <button class="btn btn-danger btn-round" (click)="btnDeleteAll()" data-role="R00015590001560D">
          Delete
        </button>
        <!--#endregion button add, delete-->

        <!--#region list view-->
        <table id="datatableApplicationPdcRegisterDetailList" datatable [dtOptions]="dtOptions"
          class="table table-striped table-bordered row-border hover" cellspacing="0" width="100%">
          <thead>
            <tr>
              <th class="disabled-sorting">No</th>
              <th class="disabled-sorting">
                <div class="form-check">
                  <label class="form-check-label">
                    <input class="form-check-input" type="checkbox" id="checkall" [(ngModel)]="selectedAll"
                      (change)="selectAll();" />
                    <span class="form-check-sign"></span>
                  </label>
                </div>
              </th>
              <th>PDC No</th>
              <th>Bank Name</th>
              <th>Date</th>
              <th>Allocation Type</th>
              <th>PDC Amount</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row of listpdcregisterdetail; let i = index">
              <td style="text-align: center;">{{listpdcregisterdetail.numberIndex+i+1}}</td>
              <td class="disabled-sorting">
                <div class="form-check">
                  <label class="form-check-label">
                    <input class="form-check-input" type="checkbox" [(ngModel)]="row.selected"
                      (change)="checkIfAllTableSelected($event, row.id);">
                    <span class="form-check-sign"></span>
                  </label>
                </div>
              </td>
              <td style="text-align: left;width: 15%;">
                <input type="hidden" value="{{row.id}}" name="p_id">
                <input class="text-left" type="text" value="{{row.pdc_no}}" name="p_pdc_no" [disabled]="isStatus">
              </td>
              <td style="text-align: left;width: 20%;" class="if-no-edit-btn">{{row.pdc_bank_name}}</td>
              <td style="text-align: center;width: 15%;">{{row.pdc_date}}</td>
              <td style="text-align: center;width: 20%;">{{row.pdc_allocation_type}}</td>
              <td style="text-align: right;width: 30%;">
                <input id="pdc_amount{{i}}" (blur)="onBlur($event,i,'amount')" (focus)="onFocus($event,i,'amount')"
                  class="text-right" type="text" value="{{row.pdc_amount | number : '1.2-2'}}" amount="pdc_amount"
                  name="p_pdc_amountt" [disabled]="isStatus || isRowcount">
              </td>
            </tr>
          </tbody>
        </table>
        <!--#endregion list view-->
      </div>
    </div>
  </div>
</div>

<!--#region lookup message-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalGenerate"
  style="margin-top: -65px">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" style="overflow:hidden; padding: 10px;">
        <div class="col-md-12">
          <!--#region button add-->
          <button type="button" class="btn btn-info btn-round" [hidden]="isStatus"
            (click)="btnGenerate(applicationpdcgenerateForm.value, applicationpdcgenerateForm.valid)">Generate</button>
          <!--#endregion button add--->
          <div class="card-body col-md-12" style="width: 100%">
            <!--#region form-->
            <form #applicationpdcgenerateForm="ngForm">
              <!--#region row-->
              <div class="row">
                <!--#region code-->
                <input type="hidden" class="form-control" [ngModel]="model.application_no" name="p_application_no">
                <!--#endregion code-->

                <!--#region First Date-->
                <div class="col-md-4">
                  <div class="form-group" [class.has-error]="p_pdc_first_date.invalid && p_pdc_first_date.touched">
                    <label for="pdc_first_date" class="control-label">First Date *</label>
                    <div>
                      <input [ngStyle]="getStyles(isButton)" class="form-control col-md-6" placeholder="dd/mm/yyyy"
                        angular-mydatepicker [ngModel]="model.pdc_first_date" name="p_pdc_first_date"
                        [options]="myDatePickerOptions" required #p_pdc_first_date="ngModel" [readonly]="isButton"
                        #pdc_first_date="angular-mydatepicker" autocomplete="off"
                        (click)="pdc_first_date.toggleCalendar()" />
                      <small *ngIf="p_pdc_first_date.errors?.required && p_pdc_first_date.touched" class="text-danger">
                        First Date is required
                      </small>
                    </div>
                  </div>
                </div>
                <!--#endregion First Date-->

                <!--#region Frequency Installment-->
                <div class="col-md-4">
                  <div class="form-group">
                    <label>Frequency Installment</label>
                    <select class='form-control col-md-6' [ngModel]="model.pdc_frequency_month"
                      name="p_pdc_frequency_month">
                      <option value='1'>MONTHLY</option>
                      <option value='2'>BI-MONTHLY</option>
                      <option value='3'>QUARTERLY</option>
                      <option value='6'>SEMI ANNUALY</option>
                      <option value='12'>ANNUALY</option>
                    </select>
                  </div>
                </div>
                <!--#endregion Frequency Installment ini int-->

                <!--#region No of PDC-->
                <div class="col-md-4">
                  <div class="form-group" [class.has-error]="pdc_count.invalid && pdc_count.touched">
                    <label for="pdc_count" class="control-label">No of PDC *</label>
                    <input type="text" style="text-align:right" class="form-control col-md-4"
                      [ngModel]="model.pdc_count" name="p_pdc_count" required #pdc_count="ngModel"
                      pattern="{{NumberOnlyPattern}}">
                    <small *ngIf="pdc_count.errors?.required && pdc_count.touched" class="text-danger">
                      No of PDC is required
                    </small>
                    <small *ngIf="pdc_count.errors?.pattern && pdc_count.touched" class="text-danger">
                      No of PDC is required and format should be <i>0-9</i>
                    </small>
                  </div>
                </div>
                <!--#endregion Count-->

                <!--#region No Prefix-->
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="pdc_no_prefix" class="control-label">No Prefix</label>
                    <input type="text" maxlength="5" class="form-control" [ngModel]="model.pdc_no_prefix"
                      name="p_pdc_no_prefix">
                  </div>
                </div>
                <!--#endregion No Prefix-->

                <!--#region No Running-->
                <div class="col-md-4">
                  <div class="form-group" [class.has-error]="pdc_no_running.invalid && pdc_no_running.touched">
                    <label for="pdc_no_running" class="control-label">No Running *</label>
                    <input id="pdc_no_running" type="text" class="form-control" [ngModel]="model.pdc_no_running"
                      name="p_pdc_no_running" required #pdc_no_running="ngModel">
                    <small *ngIf="pdc_no_running.errors?.required && pdc_no_running.touched" class="text-danger">
                      No Running is required
                    </small>
                  </div>
                </div>
                <!--#endregion No Running-->

                <!--#region No Postfix-->
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="pdc_no_postfix" class="control-label">No Postfix</label>
                    <input type="text" maxlength="5" class="form-control" [ngModel]="model.pdc_no_postfix"
                      name="p_pdc_no_postfix">
                  </div>
                </div>
                <!--#endregion No Postfix-->

                <!--#region Bank-->
                <div class="col-md-4">
                  <label>Bank *</label>
                  <div class="form-group">
                    <div class="col-md-12 buttons">
                      <button class="btn btn-icon btn-outline-default btn-round btn-md btn-lookup-margin" type="button"
                        (click)="btnLookupBank()" data-target="#lookupModalBank" data-toggle="modal" href="#">
                        <i class="fa fa-search-plus"></i></button>{{model.pdc_bank_name}}
                      <input type="hidden" name="p_pdc_bank_code" [ngModel]="model.pdc_bank_code" />
                      <input type="hidden" name="p_pdc_bank_name" [ngModel]="model.pdc_bank_name" required
                        #pdc_bank_name="ngModel" />
                    </div>
                  </div>
                  <small
                    [hidden]="pdc_bank_name.valid || (pdc_bank_name.pristine && !applicationpdcgenerateForm.submitted)"
                    class="text-danger">
                    Bank is required
                  </small>
                </div>
                <!--#endregion Bank-->

                <!--#region Currency-->
                <div class="col-md-4">
                  <label>Currency *</label>
                  <div class="form-group">
                    <div class="col-md-12 buttons">
                      <button class="btn btn-icon btn-outline-default btn-round btn-md btn-lookup-margin" type="button"
                        (click)="btnLookupCurrency()" data-target="#lookupModalCurrency" data-toggle="modal" href="#">
                        <i class="fa fa-search-plus"></i></button> {{model.pdc_currency_code}}
                      <input type="hidden" name="p_pdc_currency_code" [ngModel]="model.pdc_currency_code" required
                        #pdc_currency_code="ngModel" />
                    </div>
                  </div>
                  <small
                    [hidden]="pdc_currency_code.valid || (pdc_currency_code.pristine && !applicationpdcgenerateForm.submitted)"
                    class="text-danger">
                    Currency is required
                  </small>
                </div>
                <!--#endregion Currency-->

                <!--#region Allocation Type-->
                <div class="col-md-4">
                  <label>Allocation Type *</label>
                  <div class="form-group">
                    <div class="col-md-12 buttons">
                      <button class="btn btn-icon btn-outline-default btn-round btn-md btn-lookup-margin" type="button"
                        (click)="btnLookupAllocationType()" data-target="#lookupModalAllocationType" data-toggle="modal"
                        href="#">
                        <i class="fa fa-search-plus"></i></button> {{model.pdc_allocation_desc}}
                      <input type="hidden" name="p_pdc_allocation_type" [ngModel]="model.pdc_allocation_type" required
                        #pdc_allocation_type="ngModel" />
                    </div>
                  </div>
                  <small
                    [hidden]="pdc_allocation_type.valid || (pdc_allocation_type.pristine && !applicationpdcgenerateForm.submitted)"
                    class="text-danger">
                    Allocation Type is required
                  </small>
                </div>
                <!--#endregion Allocation Type-->

                <!--#region Value Amount-->
                <div class="col-md-4">
                  <div class="form-group" [class.has-error]="pdc_value_amount.invalid && pdc_value_amount.touched">
                    <label for="pdc_value_amount" class="control-label">Value Amount *</label>
                    <input type="text" style="text-align:right" class="form-control col-md-6"
                      [ngModel]="model.pdc_value_amount | number : '1.2-2'" name="p_pdc_value_amount" required
                      #pdc_value_amount="ngModel" amount="pdc_value_amount" (change)="ValueAmount($event)">
                    <!-- (change)="ValueAmount($event)"  -->
                    <small *ngIf="pdc_value_amount.errors?.required && pdc_value_amount.touched" class="text-danger">
                      Value Amount is required
                    </small>
                    <small *ngIf="pdc_value_amount.errors?.pattern && pdc_value_amount.touched" class="text-danger">
                      Value Amount is required and format should be <i>0-9</i>
                    </small>
                  </div>
                </div>
                <!--#endregion Value amount-->

                <!--#region Inkaso fee amount-->
                <div class="col-md-4">
                  <div class="form-group"
                    [class.has-error]="pdc_inkaso_fee_amount.invalid && pdc_inkaso_fee_amount.touched">
                    <label for="pdc_inkaso_fee_amount" class="control-label">Inkaso Fee Amount *</label>
                    <input type="text" style="text-align:right" class="form-control col-md-6"
                      [ngModel]="model.pdc_inkaso_fee_amount | number : '1.2-2'" name="p_pdc_inkaso_fee_amount" required
                      #pdc_inkaso_fee_amount="ngModel" amount="pdc_inkaso_fee_amount" (change)="InkasoAmount($event)">
                    <!-- (change)="InkasoAmount($event)" -->
                    <small *ngIf="pdc_inkaso_fee_amount.errors?.required && pdc_inkaso_fee_amount.touched"
                      class="text-danger">
                      Inkaso fee amount is required
                    </small>
                    <small *ngIf="pdc_inkaso_fee_amount.errors?.pattern && pdc_inkaso_fee_amount.touched"
                      class="text-danger">
                      Inkaso fee amount is required and format should be <i>0-9</i>
                    </small>
                  </div>
                </div>
                <!--#endregion Inkaso fee amount-->

                <!--#region Clearing Fee amount-->
                <div class="col-md-4">
                  <div class="form-group"
                    [class.has-error]="pdc_clearing_fee_amount.invalid && pdc_clearing_fee_amount.touched">
                    <label for="pdc_clearing_fee_amount" class="control-label">Clearing Fee Amount *</label>
                    <input type="text" style="text-align:right" class="form-control col-md-6"
                      [ngModel]="model.pdc_clearing_fee_amount | number : '1.2-2'" name="p_pdc_clearing_fee_amount"
                      required #pdc_clearing_fee_amount="ngModel" amount="pdc_clearing_fee_amount"
                      (change)="ClearingAmount($event)">
                    <!-- (change)="ClearingAmount($event)" -->
                    <small *ngIf="pdc_clearing_fee_amount.errors?.required && pdc_clearing_fee_amount.touched"
                      class="text-danger">
                      Clearing Fee Amount is required
                    </small>
                    <small *ngIf="pdc_clearing_fee_amount.errors?.pattern && pdc_clearing_fee_amount.touched"
                      class="text-danger">
                      Clearing Fee Amount is required and format should be <i>0-9</i>
                    </small>
                  </div>
                </div>
                <!--#endregion Clearing Fee amount-->

                <!--#region amount-->
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="pdc_amount" class="control-label">PDC Amount </label>
                    <input type="text" style="text-align:right" class="form-control col-md-6"
                      [ngModel]="model.pdc_amount | number : '1.2-2'" name="p_pdc_amount" required #pdc_amount="ngModel"
                      readonly>
                  </div>
                </div>
                <!--#endregion Currency amount-->
              </div>
              <!--#endregion row-->
            </form>
            <!--#endform-->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--#endregion lookup message-->

<!--#region lookup bank-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalBank" style="margin-top: -65px">
  <div class="modal-dialog  modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" style="overflow:hidden;">
        <div class="col-md-12">
          <div class="card-body col-md-12" style="width: 100%">
            <table id="datatableLookupBank" class="table table-striped table-bordered hover" cellspacing="0"
              style="min-width: 100%;">
              <thead>
                <tr>
                  <th style="display: none;"></th>
                  <th class="disabled-sorting">No</th>
                  <th>Code</th>
                  <th>Description</th>
                  <th style="text-align: center;">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let row of lookupbank ;let i=index ">
                  <td style="display: none;"></td>
                  <td style="text-align: center;">{{lookupbank.numberIndex+i+1}}</td>
                  <td class="text-center">{{ row.code }}</td>
                  <td>{{ row.description }}</td>
                  <td class="text-center">
                    <button class="btn btn-outline-default btn-round"
                      (click)="btnSelectRowBank(row.code, row.description)">Select</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--#endregion lookup bank-->

<!--#region lookup currency-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalCurrency"
  style="margin-top: -65px">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" style="overflow:hidden;">
        <div class="col-md-12">
          <div class="card-body col-md-12" style="width: 100%">
            <table id="datatableLookupCurrency" class="table table-striped table-bordered hover" cellspacing="0"
              style="min-width: 100%;">
              <thead>
                <tr>
                  <th style="display: none;"></th>
                  <th class="disabled-sorting">No</th>
                  <th>Code</th>
                  <th>Description</th>
                  <th style="text-align: center;">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let row of lookupcurrency;let i=index ">
                  <td style="display: none;"></td>
                  <td style="text-align: center;">{{lookupcurrency.numberIndex+i+1}}</td>
                  <td class="text-center">{{ row.code }}</td>
                  <td>{{ row.description }}</td>
                  <td class="text-right">
                    <button class="btn btn-outline-default btn-round"
                      (click)="btnSelectRowCurrency(row.code)">Select</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--#endregion lookup currency-->

<!--#region lookup Allocation Type-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalAllocationType"
  style="margin-top: -65px">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" style="overflow:hidden;">
        <div class="col-md-12">
          <div class="card-body col-md-12" style="width: 100%">
            <table id="datatableLookupAllocationType" class="table table-striped table-bordered hover" cellspacing="0"
              style="min-width: 100%;">
              <thead>
                <tr>
                  <th style="display: none;"></th>
                  <th class="disabled-sorting">No</th>
                  <th>Code</th>
                  <th>Description</th>
                  <th style="text-align: center;">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let row of lookupAllocationType;let i=index ">
                  <td style="display: none;"></td>
                  <td style="text-align: center;">{{lookupAllocationType.numberIndex+i+1}}</td>
                  <td class="text-center">{{ row.code }}</td>
                  <td>{{ row.general_subcode_desc }}</td>
                  <td class="text-right">
                    <button class="btn btn-outline-default btn-round"
                      (click)="btnSelectRowAllocationType(row.code, row.general_subcode_desc)">Select</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--#endregion lookup Allocation Type-->