<div class="main-content margin-wizard-content" style="margin-top: 20px;">
  <!-- spinner region -->
  <div class="panel-container-spinner" *ngIf="showSpinner">
    <app-spinner class="spinner-container"></app-spinner>
  </div>
  <!-- end spinner region -->
  <div class="row">
    <div class="col-md-12">
      <!--#region form-->
      <form #referencedetailForm="ngForm"
        (ngSubmit)="onFormSubmit(referencedetailForm.value, referencedetailForm.valid)">

        <!--#region button save dan back-->
        <button [hidden]="this.plafondStatus" type="submit" class="btn btn-info btn-round"
          data-role="R00022550142256C">Save</button>
        <button type="button" class="btn btn-danger btn-round" (click)="btnBack()">Back</button>
        <!--#endregion button save dan back-->

        <!--#region row-->
        <div class="row" [hidden]="this.paramss != null">
          <!--#region Existing Client -->
          <div class="col-md-4">
            <div class="form-group">
              <label [hidden]="this.paramss == null" data-toggle="tooltip" class="labelmodule">Existing
                Client</label>
              <label [hidden]="this.paramss != null" (click)="resetClientExisting()" style="cursor: pointer;"
                title="CLEAR" class="labelmodule">Existing Client</label>
              <div class="col-md-12">
                <button [disabled]="this.paramss != null" class="btn btn-icon btn-outline-default btn-round btn-md"
                  type="button" (click)="btnLookupExistingClient()" data-toggle="modal"
                  data-target="#lookupModalExistingClient" href="#"><i class="fa fa-search-plus"></i></button>
                {{model.existing_client_name}}
                <input type="hidden" class="form-control" [ngModel]="model.relation_client_code"
                  name="p_relation_client_code">
              </div>
            </div>
          </div>
          <!--#endregion Existing Client-->
        </div>
        <!--#endregion row-->

        <!--#region row-->
        <div class="row">
          <!--#region p_client_code-->
          <input type="text" [ngModel]="this.param" maxlength="50" name="p_client_code" hidden>
          <!--#endregion p_client_code-->

          <!--#region p_id-->
          <input type="text" [ngModel]="this.paramss" name="p_id" hidden>
          <!--#endregion p_id-->

          <!--#region p_client_type-->
          <input type="text" [ngModel]="model.client_type" maxlength="10" name="p_client_type" hidden>
          <!--#endregion p_client_type-->

          <!--#region p_relation_type-->
          <input type="text" [ngModel]="model.relation_type" maxlength="15" name="p_relation_type" hidden>
          <!--#endregion p_relation_type-->

          <!--#region reference_type_code-->
          <div class="col-md-4">
            <div class="form-group">
              <label>Reference Type</label>
              <select class="form-control col-md-6" [ngModel]="model.reference_type_code" name="p_reference_type_code"
                [disabled]="this.plafondStatus">
                <option value='REFFERENCE'>REFFERENCE</option>
                <option value='EMERGENCY'>EMERGENCY</option>
              </select>
            </div>
          </div>
          <!--#endregion reference_type_code-->

          <!--#region full_name-->
          <div class="col-md-4">
            <div class="form-group">
              <label for="full_name" class="control-label">Full Name * </label>
              <input type="text" class="form-control" [ngModel]="model.full_name" maxlength="250" name="p_full_name"
                required #full_name="ngModel" pattern={{textonly}} [disabled]="this.plafondStatus"
                [readonly]="model.relation_client_code != null">
            </div>
            <small
              *ngIf="(full_name.errors?.required && full_name.touched) || (full_name.errors?.required && referencedetailForm.submitted)"
              class="text-danger">
              Full Name is required
            </small>
            <small *ngIf="full_name.errors?.pattern && full_name.touched" class="text-danger">
              Full Name is required and format should be <i>(A-z or a-z)</i>.
            </small>
          </div>
          <!--#endregion full_name-->

          <!--#region id_no-->
          <div class="col-md-4">
            <div class="form-group">
              <label for="id_no" class="control-label">ID No *</label>
              <input type="text" class="form-control" [ngModel]="model.id_no" maxlength="50" name="p_id_no" required
                #id_no="ngModel" [disabled]="this.plafondStatus" [readonly]="model.relation_client_code != null"
                maxlength="16">
              <small
                *ngIf="(id_no.errors?.required && id_no.touched) || (id_no.errors?.required && referencedetailForm.submitted)"
                class="text-danger">
                ID No is required
              </small>
            </div>
          </div>
          <!--#endregion id_no-->
        </div>
        <!--#endregion row-->

        <!--#region row-->
        <div class="row">
          <!--#region mother_maiden_name-->
          <div class="col-md-4">
            <div class="form-group">
              <label for="mother_maiden_name" class="control-label">Mother Maiden Name * </label>
              <input type="text" class="form-control" [ngModel]="model.mother_maiden_name" maxlength="250"
                name="p_mother_maiden_name" required #mother_maiden_name="ngModel" [disabled]="this.plafondStatus"
                [readonly]="model.relation_client_code != null">
              <small
                *ngIf="(mother_maiden_name.errors?.required && mother_maiden_name.touched) || (mother_maiden_name.errors?.required && referencedetailForm.submitted)"
                class="text-danger">
                Mother Maiden Name is required
              </small>
            </div>
          </div>
          <!--#endregion mother_maiden_name-->

          <!--#region gender_code-->
          <div class="col-md-4">
            <label for="p_gender_code" class="control-label" class="labelgsubcode">Gender *</label>
            <div class="form-group">
              <div class="col-md-12">
                <button class="btn btn-icon btn-outline-default btn-round btn-md btn-lookup-margin" type="button"
                  (click)="btnLookupGender()" data-target="#lookupModalGender" data-toggle="modal" href="#"
                  [disabled]="this.plafondStatus || model.relation_client_code != null">
                  <i class="fa fa-search-plus"></i></button> {{model.gender_desc}}
                <input type="hidden" name="p_gender_code" [ngModel]="model.gender_code" required
                  #p_gender_code="ngModel" />
              </div>
              <small
                *ngIf="p_gender_code.errors?.required && p_gender_code.touched || (p_gender_code.errors?.required && referencedetailForm.submitted) "
                class="text-danger">
                Gender is required
              </small>
            </div>
          </div>
          <!--#endregion gender_code-->

          <!--#region check box is_emergency_contact-->
          <div class="col-md-4">
            <div class="form-check mt-3" style="margin-left: -35px;">
              <div class="form-check">
                <label class="form-check-label">
                  <input class="form-check-input" type="checkbox" [ngModel]="model.is_emergency_contact"
                    name="p_is_emergency_contact" [disabled]="this.plafondStatus">
                  Emergency Contact
                  <span class="form-check-sign"></span>
                </label>
              </div>
            </div>
          </div>
          <!--#endregion check box is_emergency_contact-->
        </div>
        <!--#endregion row-->

        <!--#region row-->
        <div class="row">
          <!--#region place_of_birth-->
          <div class="col-md-4">
            <div class="form-group">
              <label for="place_of_birth" class="control-label">Place of Birth *</label>
              <input type="text" class="form-control" [ngModel]="model.place_of_birth" maxlength="250"
                name="p_place_of_birth" required #place_of_birth="ngModel" [disabled]="this.plafondStatus"
                [readonly]="model.relation_client_code != null">
              <small
                *ngIf="(place_of_birth.errors?.required && place_of_birth.touched) || (place_of_birth.errors?.required && referencedetailForm.submitted)"
                class="text-danger">
                Place of Birth is required
              </small>
            </div>
          </div>
          <!--#endregion place_of_birth-->

          <!--#region date_of_birth-->
          <div class="col-md-4">
            <div class="form-group">
              <label for="p_date_of_birth" class="control-label">Date of Birth *</label>
              <input [ngStyle]="getStyles(this.plafondStatus)" class="form-control col-md-6" placeholder="dd/mm/yyyy"
                angular-mydatepicker [ngModel]="model.date_of_birth" name="p_date_of_birth"
                [options]="myDatePickerOptions" (click)="date_of_birth.toggleCalendar()" required
                #p_date_of_birth="ngModel" #date_of_birth="angular-mydatepicker" autocomplete="off"
                [readonly]="this.plafondStatus || model.relation_client_code != null" />
              <small
                *ngIf="(p_date_of_birth.errors?.required && p_date_of_birth.touched) || (p_date_of_birth.errors?.required && referencedetailForm.submitted)"
                class="text-danger">
                Date of Birth is required
              </small>
            </div>
          </div>
          <!--#endregion date_of_birth-->
        </div>
        <!--#endregion row-->

        <!--#region row-->
        <div class="row">
          <!--#region lookup Province Code-->
          <div class="col-md-4">
            <div class="form-group">
              <label class="labelmodule" (click)="resetProvince()"
                [ngStyle]="getStyles2(this.plafondStatus || model.relation_client_code != null)"
                title="CLEAR">Province</label>
              <div class="col-md-12 buttons">
                <button class="btn btn-icon btn-outline-default btn-round btn-md btn-lookup-margin" type="button"
                  [disabled]="this.plafondStatus || model.relation_client_code != null" (click)="btnLookupProvince()"
                  data-toggle="modal" data-target="#lookupModalProvince" href="#"><i
                    class="fa fa-search-plus"></i></button>
                {{model.province_name}}
                <input type="hidden" class="form-control" [ngModel]="model.province_code" name="p_province_code"
                  #province_code="ngModel">
                <input type="hidden" class="form-control" [ngModel]="model.province_name" name="p_province_name"
                  #province_name="ngModel">
              </div>
            </div>
          </div>
          <!--#endregion lookup Province Code-->

          <!--#region lookup City code-->
          <div class="col-md-4">
            <div class="form-group">
              <label class="labelmodule" (click)="resetCity()"
                [ngStyle]="getStyles2(this.plafondStatus || model.relation_client_code != null)"
                title="CLEAR">City</label>
              <div class="col-md-12 buttons">
                <button class="btn btn-icon btn-outline-default btn-round btn-md btn-lookup-margin" type="button"
                  [disabled]="this.plafondStatus || model.relation_client_code != null" (click)="btnLookupCity()"
                  data-toggle="modal" data-target="#lookupModalCity" href="#"><i class="fa fa-search-plus"></i></button>
                {{model.city_name}}
                <input type="hidden" class="form-control" [ngModel]="model.city_code" name="p_city_code"
                  #city_code="ngModel">
                <input type="hidden" class="form-control" [ngModel]="model.city_name" name="p_city_name"
                  #city_name="ngModel">
              </div>
            </div>
          </div>
          <!--#endregion lookup City Code-->

          <!--#region zip code-->
          <div class="col-md-4">
            <div class="form-group">
              <label class="labelmodule" (click)="resetZipCode()"
                [ngStyle]="getStyles2(this.plafondStatus || model.relation_client_code != null)" title="CLEAR">Zip
                Code</label>
              <div class="col-md-12 buttons btn-lookup-margin">
                <button class="btn btn-icon btn-outline-default btn-round btn-md" type="button"
                  [disabled]="this.plafondStatus || model.relation_client_code != null" (click)="btnLookupZipCode()"
                  data-toggle="modal" data-target="#lookupModalZipCode" href="#"><i
                    class="fa fa-search-plus"></i></button>
                {{model.zip_code_code}}
                <input type="hidden" class="form-control" [ngModel]="model.zip_name" name="p_zip_name">
                <input type="hidden" class="form-control" [ngModel]="model.zip_code" name="p_zip_code">
                <input type="hidden" class="form-control" [ngModel]="model.zip_code_code" name="p_zip_code_code">
              </div>
            </div>
          </div>
          <!--#endregion zip code-->
        </div>
        <!--#endregion row-->

        <!--#region row-->
        <div class="row">
          <!--#region sub district-->
          <div class="col-md-4">
            <div class="form-group">
              <label for="sub_district" class="control-label">Sub District</label>
              <input type="text" class="form-control" [ngModel]="model.sub_district" maxlength="250"
                name="p_sub_district" #sub_district="ngModel" readonly>
            </div>
          </div>
          <!--#endregion sub district-->

          <!--#region village-->
          <div class="col-md-4">
            <div class="form-group">
              <label for="village" class="control-label">Village</label>
              <input type="text" class="form-control" [ngModel]="model.village" maxlength="250" name="p_village"
                #village="ngModel" readonly>
            </div>
          </div>
          <!--#endregion village-->

          <!--#region rt/rw-->
          <div class="col-md-4">
            <div class="form-group">
              <label for="rt && rw" class="control-label">RT/RW</label>
              <div class="row">
                <div class="col-md-4">
                  <input type="text" class="form-control" [ngModel]="model.rt" maxlength="5" name="p_rt" #rt="ngModel"
                    pattern="{{NumberOnlyPattern}}" [disabled]="this.plafondStatus"
                    [readonly]="model.relation_client_code != null">
                </div>
                -
                <div class="col-md-4">
                  <input type="text" class="form-control" [ngModel]="model.rw" maxlength="5" name="p_rw" #rw="ngModel"
                    pattern="{{NumberOnlyPattern}}" [disabled]="this.plafondStatus"
                    [readonly]="model.relation_client_code != null">
                </div>
              </div>
            </div>
          </div>
          <!--#endregion rt/rw-->
        </div>
        <!--#endregion row-->

        <!--#region row-->
        <div class="row">
          <!--#region address-->
          <div class="col-md-4">
            <div class="form-group">
              <label for="address" class="control-label">Address</label>
              <textarea type="text" class="form-control" [ngModel]="model.address" maxlength="4000" name="p_address"
                #address="ngModel" #address="ngModel" [disabled]="this.plafondStatus"
                [readonly]="model.relation_client_code != null"></textarea>
            </div>
          </div>
          <!--#endregion address-->

          <!--#region area_mobile_no + mobile_no-->
          <div class="col-md-4">
            <div class="form-group">
              <label for="area_mobile_no && mobile_no" class="control-label">Phone No.</label>
              <div class="row">
                <div class="col-md-4">
                  <input type="text" class="form-control" [ngModel]="model.area_mobile_no" name="p_area_mobile_no"
                    #area_mobile_no="ngModel" maxlength="4" pattern={{NumberOnlyPattern}}
                    [disabled]="this.plafondStatus" [readonly]="model.relation_client_code != null">
                </div>
                -
                <div class="col-md-7">
                  <input type="text" class="form-control" [ngModel]="model.mobile_no" name="p_mobile_no" maxlength="15"
                    #mobile_no="ngModel" pattern={{NumberOnlyPattern}} [disabled]="this.plafondStatus"
                    [readonly]="model.relation_client_code != null">
                </div>
              </div>
            </div>
          </div>
          <!--#endregion area_mobile_no + mobile_no-->
        </div>
        <!--#endregion row-->
      </form>
      <!--#endregion form-->
    </div>
  </div>
</div>

<!--#region lookup Gender-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalGender"
  style="margin-top: -65px">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" style="overflow:hidden;">
        <div class="col-md-12">
          <div class="card-body col-md-12">
            <table id="datatableLookupGender" class="table table-striped table-bordered hover" cellspacing="0"
              style="min-width: 100%;">
              <thead>
                <tr>
                  <th style="display: none;"></th>
                  <th class="disabled-sorting">No</th>
                  <th>Description</th>
                  <th style="text-align: center;">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let row of lookupgender;let i=index ">
                  <td style="display: none;"></td>
                  <td style="text-align: center;">{{lookupgender.numberIndex+i+1}}</td>
                  <td style="width: 100%;">{{ row.description }}</td>
                  <td class="text-center">
                    <button class="btn btn-outline-default btn-round"
                      (click)="btnSelectRowGender(row.code, row.description)">Select</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--#endregion lookup Gender-->

<!--#region lookup province-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalProvince"
  style="margin-top: -65px">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" style="overflow:hidden;">
        <div class="col-md-12">
          <div class="card-body col-md-12">
            <table id="datatableLookupProvince" class="table table-striped table-bordered hover" cellspacing="0"
              style="min-width: 100%;">
              <thead>
                <tr>
                  <th style="display: none;"></th>
                  <th class="disabled-sorting">No</th>
                  <th>Code</th>
                  <th>Description</th>
                  <th class="text-center">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let row of lookupprovince;let i=index ">
                  <td style="display: none;"></td>
                  <td style="text-align: center;">{{lookupprovince.numberIndex+i+1}}</td>
                  <td style="width:20%;text-align: center;">{{ row.code }}</td>
                  <td style="width:80%;">{{ row.description }}</td>
                  <td class="text-center">
                    <button class="btn btn-outline-default btn-round"
                      (click)="btnSelectRowLookupProvince(row.code, row.description)">Select</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--#endregion lookup province-->

<!--#region lookup city-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalCity" style="margin-top: -65px">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" style="overflow:hidden;">
        <div class="col-md-12">
          <div class="card-body col-md-12">
            <table id="datatableLookupCity" class="table table-striped table-bordered hover" cellspacing="0"
              style="min-width: 100%;">
              <thead>
                <tr>
                  <th style="display: none;"></th>
                  <th class="disabled-sorting">No</th>
                  <th>Code</th>
                  <th>Description</th>
                  <th class="text-center">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let row of lookupcity;let i=index ">
                  <td style="display: none;"></td>
                  <td style="text-align: center;">{{lookupcity.numberIndex+i+1}}</td>
                  <td style="width:20%;text-align: center;">{{ row.code }}</td>
                  <td style="width:80%;">{{ row.description }}</td>
                  <td class="text-center">
                    <button class="btn btn-outline-default btn-round"
                      (click)="btnSelectRowLookupCity(row.code, row.description)">Select</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--#endregion lookup city-->

<!--#region lookup zip-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalZipCode"
  style="margin-top: -65px">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" style="overflow:hidden;">
        <div class="col-md-12 buttons btn-lookup-margin">
          <div class="card-body col-md-12">
            <table id="datatableLookupZipCode" class="table table-striped table-bordered hover" cellspacing="0"
              style="min-width: 100%;">
              <thead>
                <tr>
                  <th style="display: none;"></th>
                  <th class="disabled-sorting">No</th>
                  <th>Code</th>
                  <th>Sub District</th>
                  <th>Village</th>
                  <th style="text-align: center;">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let row of lookupzipcode;let i=index ">
                  <td style="display: none;"></td>
                  <td style="text-align: center;">{{lookupzipcode.numberIndex+i+1}}</td>
                  <td style="text-align: center; width: 20%;">{{ row.postal_code }}</td>
                  <td style="width: 40%;">{{ row.sub_district }}</td>
                  <td style="width: 40%;">{{ row.village }}</td>
                  <td class="text-center">
                    <button class="btn btn-outline-default btn-round"
                      (click)="btnSelectRowLookupZipCode(row.code, row.postal_code, row.zip_code_name, row.sub_district,row.village)">Select</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--#endregion lookup zip-->

<!--#region lookup Existing Client-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalExistingClient"
  style="margin-top: -65px">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" style="overflow:hidden;">
        <div class="col-md-12">
          <div class="card-body col-md-12">

            <table id="datatableLookupExistingClient" class="table table-striped table-bordered hover" cellspacing="0"
              style="min-width: 100%;">
              <thead>
                <tr>
                  <th style="display: none;"></th>
                  <th class="disabled-sorting">No</th>
                  <th>Client No</th>
                  <th>Name</th>
                  <th style="text-align: center;">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let row of lookupexistingclient;let i=index ">
                  <td style="display: none;"></td>
                  <td style="text-align: center;">{{lookupexistingclient.numberIndex+i+1}}</td>
                  <td style="width: 20%;" class="text-center">{{ row.client_no }}</td>
                  <td style="width: 80%;">{{ row.client_name}}</td>
                  <td class="text-center">
                    <button class="btn btn-outline-default btn-round" (click)="btnSelectRowExistingClient(
                      row.code 
                      ,row.client_name
                      ,row.full_name			  
                      ,row.gender_code			  
                      ,row.gender_desc
                      ,row.mother_maiden_name	  
                      ,row.place_of_birth		  
                      ,row.date_of_birth		  
                      ,row.province_code		  
                      ,row.province_name		  
                      ,row.city_code			  
                      ,row.city_name			  
                      ,row.zip_code			  
                      ,row.zip_code_code		  
                      ,row.zip_name			  
                      ,row.sub_district		  
                      ,row.village				  
                      ,row.address				  
                      ,row.rt					  
                      ,row.rw					  
                      ,row.area_mobile_no		  
                      ,row.mobile_no			  
                      ,row.id_no				  
                      ,row.npwp_no				  
                      ,row.family_type_code
                      ,row.is_emergency_contact
                      ,row.phone_no
                      ,row.area_phone_no
                      ,row.relation_type
                      ,row.reference_type_code
                      )">Select</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--#endregion lookup Existing Client-->