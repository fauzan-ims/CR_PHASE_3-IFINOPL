<div class="main-content">
  <div class="row">
    <div class="col-md-12">
      <div class="card-body">
        <!--#region row-->
        <div class="row">
          <!--#region LookupGeneral-->
          <div class="col-md-4">
            <div class="form-group" [class.has-error]="obligation_type.invalid && obligation_type.touched">
              <label for="obligation_type" class="control-label" (click)="btnClearObligation()" style="cursor: pointer;"
              title="Clear">Obligation </label>
              <div class="col-md-12 buttons btn-lookup-margin">
                <span>
                  <button class="btn btn-icon btn-outline-default btn-round btn-md" type="button"
                    (click)="btnLookupGeneral()" data-toggle="modal" data-target="#lookupModalGeneral" href="#"><i
                      class="fa fa-search-plus"></i></button>
                  {{model.obligation_name}}
                  <input type="hidden" class="form-control" [ngModel]="model.obligation_type" name="p_obligation_type"
                    required #obligation_type="ngModel">
                </span>
              </div>
            </div>
          </div>
          <!--#endregion LookupGeneral-->
        </div>
        <!--#endregion row-->

        <!--#region list view-->
        <table id="datatableAgreementObligationList" datatable [dtOptions]="dtOptions"
          class="table table-striped table-bordered row-border hover" cellspacing="0" width="100%">
          <thead>
            <tr>
              <th class="disabled-sorting">No</th>
              <th style="display: none;"></th>
              <th>Installment No</th>
              <th>Overdue Days </th>
              <th>Obligation Type </th>
              <th>Obligation Amount</th>
              <th>Total Payment</th>
              <th>Payment</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row of listagreement;let i=index">
              <td [ngStyle]="{'backgroundColor': (row.status=='1') ? '#f3cccc' : 'none', 'text-align': 'center'}" >{{listagreement.numberIndex+i+1}}</td>
              <td style="display: none;"></td>
              <td [ngStyle]="{'backgroundColor': (row.status=='1') ? '#f3cccc' : 'none', 'width': '10%', 'text-align': 'center'}">{{row.installment_no}}</td>
              <td [ngStyle]="{'backgroundColor': (row.status=='1') ? '#f3cccc' : 'none', 'width': '15%', 'text-align': 'center'}">{{row.obligation_day}}</td>
              <td [ngStyle]="{'backgroundColor': (row.status=='1') ? '#f3cccc' : 'none', 'width': '20%', 'text-align': 'left'}">{{row.obligation_name}}</td>
              <td [ngStyle]="{'backgroundColor': (row.status=='1') ? '#f3cccc' : 'none', 'width': '20%', 'text-align': 'right'}">{{row.obligation_amount | number : '1.2-2'}}</td>
              <td [ngStyle]="{'backgroundColor': (row.status=='1') ? '#f3cccc' : 'none', 'width': '15%', 'text-align': 'right'}">{{row.total_payment | number : '1.2-2'}}</td>
              <td [ngStyle]="{'backgroundColor': (row.status=='1') ? '#f3cccc' : 'none', 'width': '20%', 'text-align': 'left'}">{{row.payment_source_no}} <br> {{row.payment_date}}</td>
              <!-- <td style="display: none;"></td> -->
              <!-- <td style="text-align: center;">{{listagreement.numberIndex+i+1}}</td>
              <td style="width: 12%;text-align: left;">{{row.installment_no}}</td>
              <td style="width: 13%;text-align: left;">{{row.obligation_day}}</td>
              <td style="width: 19%;text-align: left;">{{row.obligation_name}}</td>
              <td style="width: 18%;text-align: right;">{{row.obligation_amount | number : '1.2-2'}}</td>
              <td style="width: 18%;text-align: right;">{{row.total_payment | number : '1.2-2'}}</td>
              <td style="width: 20%;text-align: left;">{{row.payment_source_no}} <br> {{row.payment_date}}</td>
              <td style="text-align: center;">
                <a class="btn btn-warning btn-link btn-icon btn-sm edit" title="Edit" (click)="btnEdit(row.installment_no)"><i
                    class="fa fa-edit"></i></a>
              </td> -->
              <td [ngStyle]="{'backgroundColor': (row.status=='1') ? '#f3cccc' : 'none','text-align': 'center'}">
                <a class="btn btn-warning btn-link btn-icon btn-sm edit" title="Edit"
                  (click)="btnEdit(row.installment_no)"><i class="fa fa-edit"></i></a>
              </td>
            </tr>
          </tbody>
        </table>
        <!--#endregion list view-->
      </div>
    </div>
  </div>

<!--#region lookup General-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalGeneral"
  style="margin-top: -65px">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" style="overflow:hidden;">
        <div class="col-md-12">
          <div class="card-body col-md-12" style="width: 100%">
            <table id="datatableLookupGeneral" class="table table-striped table-bordered hover" cellspacing="0"
              style="min-width: 100%;">
              <thead>
                <tr>
                  <th style="display: none;"></th>
                  <th class="disabled-sorting">No</th>
                  <th>Code</th>
                  <th>Description</th>
                  <th style="text-align: center;">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let row of lookupGeneral;let i=index">
                  <td style="display: none;"></td>
                  <td style="text-align: center;">{{lookupGeneral.numberIndex+i+1}}</td>
                  <td style="text-align: center; width: 30%;">{{ row.obligation_type }}</td>
                  <td style="width: 70%;">{{ row.obligation_name }}</td>
                  <td class="text-right">
                    <button class="btn btn-outline-default btn-round"
                      (click)="btnSelectRowGeneral(row.obligation_type, row.obligation_name)">Select</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--#endregion lookup lookupGeneral-->